<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raccoon's Belohnungssystem</title>
    <script src="https://cdn/tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0a192f;
            --card-bg: rgba(255, 255, 255, 0.08);
            --border-color: rgba(255, 255, 255, 0.2);
            --text-color: #e6f1ff;
            --highlight-color: #64ffda;
            --shadow-color: rgba(10, 25, 47, 0.7);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-y: auto;
            min-height: 100vh;
        }

        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .background-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(10, 25, 47, 0.6) 0%, rgba(10, 25, 47, 1) 80%);
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            opacity: 0.2;
            animation: float 20s infinite ease-in-out;
            pointer-events: none;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .floating-element.feather {
            /* Lädt das Bild aus dem GitHub-Repository */
            background-image: url('https://wmnruleoverraccoons.github.io/RaccoonRewards/feather_image_png_transparent.png');
        }
        
        .raccoon-icon {
             filter: drop-shadow(0 4px 6px rgba(0,0,0,0.4));
        }

        @keyframes float {
            0% { transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); opacity: 0.2; }
            25% { transform: translateY(-40px) translateX(30px) rotate(90deg) scale(1.1); opacity: 0.3; }
            50% { transform: translateY(-20px) translateX(-20px) rotate(180deg) scale(1); opacity: 0.25;}
            75% { transform: translateY(20px) translateX(40px) rotate(270deg) scale(0.9); opacity: 0.3; }
            100% { transform: translateY(0px) translateX(0px) rotate(360deg) scale(1); opacity: 0.2; }
        }

        .floating-element.fast {
            animation-name: float-fast;
            animation-duration: 12s;
            opacity: 0.35;
        }

        @keyframes float-fast {
            0% { transform: translateY(10vh) translateX(-10vw) rotate(0deg); }
            50% { transform: translateY(-110vh) translateX(20vw) rotate(720deg); }
            51% { opacity: 0; transform: translateY(10vh) translateX(-10vw) rotate(0deg); }
            52% { opacity: 0.35; }
            100% { transform: translateY(10vh) translateX(-10vw) rotate(0deg); }
        }

        .card-container {
            perspective: 1000px;
            width: 170px;
            height: 240px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px 0 var(--shadow-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: var(--text-color);
            flex-direction: column;
            overflow-wrap: break-word;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        /* Neuer Hover-Effekt */
        @keyframes rgb-border-glow {
            0%   { border-color: #ff4d4d; box-shadow: 0 0 12px #ff4d4d, 0 8px 32px 0 var(--shadow-color); }
            50%  { border-color: #4d4dff; box-shadow: 0 0 12px #4d4dff, 0 8px 32px 0 var(--shadow-color); }
            100% { border-color: #ff4d4d; box-shadow: 0 0 12px #ff4d4d, 0 8px 32px 0 var(--shadow-color); }
        }

        .card-container:hover .card-face {
            animation: rgb-border-glow 2s infinite linear;
        }


        .card-face--front {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .card-face--back {
            transform: rotateY(180deg);
        }
        
        .card-description {
            font-style: italic;
            margin-bottom: 15px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .card-face--back.unlocked {
             font-family: 'Playfair Display', serif;
             font-size: 1.2rem;
        }
        
        .password-input {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            padding: 5px;
            text-align: center;
            color: var(--text-color);
            margin-top: 10px;
            width: 80%;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 25, 47, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div id="background-container" class="background-container"></div>
    
    <main class="text-center">
        <div class="flex justify-center items-center gap-4 mb-4">
             <img src="raccoon_image_png_transparent.jpg" alt="Raccoon Symbol" class="w-16 h-16 raccoon-icon">
            <h1 class="text-4xl sm:text-5xl font-bold" style="font-family: 'Playfair Display', serif;">Eine kleine Reise für Raccoon</h1>
        </div>
        <p class="text-lg sm:text-xl mb-12 max-w-2xl mx-auto">Schalte Karten frei, um verborgene Schätze zu entdecken.</p>

        <div class="grid grid-cols-3 sm:grid-cols-5 gap-4 sm:gap-6 justify-items-center" id="card-grid">
            <!-- Cards will be injected here by JavaScript -->
        </div>
    </main>

    <!-- Modal for Reward -->
    <div id="reward-modal" class="modal">
        <div class="modal-content">
            <h2 id="reward-title" class="text-3xl font-bold mb-4" style="font-family: 'Playfair Display', serif;"></h2>
            <p id="reward-message" class="text-lg mb-6"></p>
            <button id="close-modal" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Verstanden!</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- KONFIGURATION ---
            // Hier kannst du die Karten anpassen. Jede Karte braucht einen Titel, ein Passwort und eine Beschreibung.
            const cardsData = [
                // Reihe 1
                { title: "Der Funke", password: "start", description: "Für den Mut, etwas Neues zu beginnen." },
                { title: "Erster Schritt", password: "mutig", description: "Wenn du eine kleine Angst überwunden hast." },
                { title: "Neugier", password: "idee", description: "Wenn du etwas Neues ausprobiert hast." },
                { title: "Geduld", password: "warten", description: "Für einen Moment, in dem du besonders geduldig warst." },
                { title: "Der Aufbruch", password: "los", description: "Wenn du ein Projekt startest, das dir wichtig ist." },
                // Reihe 2
                { title: "Herausforderung", password: "ruhe", description: "Wenn du eine stressige Situation meisterst." },
                { title: "Innere Stärke", password: "kraft", description: "Für einen Tag, an dem du für dich eingestanden bist." },
                { title: "Ein Lächeln", password: "lachen", description: "Wenn du jemanden zum Lachen gebracht hast." },
                { title: "Erkenntnis", password: "lernen", description: "Für eine neue Fähigkeit, die du gelernt hast." },
                { title: "Teamgeist", password: "wir", description: "Wenn du einem Freund geholfen hast." },
                 // Reihe 3
                { title: "Fokus", password: "konzentration", description: "Wenn du eine Aufgabe ohne Ablenkung beendet hast." },
                { title: "Harmonie", password: "einklang", description: "Für einen Moment des inneren Friedens." },
                { title: "Das Herzstück", password: "mitte", description: "Wenn du etwas nur für dich getan hast." },
                { title: "Disziplin", password: "durchhalten", description: "Wenn du trotz Schwierigkeiten weitergemacht hast." },
                { title: "Weisheit", password: "erfahrung", description: "Für eine Lektion, die du aus einem Fehler gelernt hast." },
                // Reihe 4
                { title: "Vertrauen", password: "glaube", description: "Wenn du jemandem dein Vertrauen geschenkt hast." },
                { title: "Großzügigkeit", password: "geben", description: "Für eine selbstlose Tat." },
                { title: "Dankbarkeit", password: "danke", description: "Wenn du dir Zeit genommen hast, dankbar zu sein." },
                { title: "Verbindung", password: "band", description: "Für ein tiefgründiges Gespräch." },
                { title: "Leidenschaft", password: "feuer", description: "Wenn du voller Begeisterung für etwas gebrannt hast." },
                // Reihe 5
                { title: "Der Gipfel", password: "höhepunkt", description: "Für das Erreichen eines wichtigen persönlichen Ziels." },
                { title: "Reflexion", password: "spiegel", description: "Wenn du dir Zeit für Selbstreflexion genommen hast." },
                { title: "Vollendung", password: "perfekt", description: "Für den Abschluss eines langen Projekts." },
                { title: "Stolzer Moment", password: "stolz", description: "Wenn du aufrichtig stolz auf dich warst." },
                { title: "Neuanfang", password: "ende", description: "Wenn du bereit bist, ein neues Kapitel zu beginnen." },
            ];

            // Hier definierst du die Belohnungen für jede mögliche Gewinnreihe.
            const rewards = {
                // Horizontale Reihen
                row0: { title: "Horizontales Meisterstück!", message: "Ein gemeinsamer Kochabend mit deinem Lieblingsessen." },
                row1: { title: "Zweite Welle des Erfolgs!", message: "Ein Gutschein für einen entspannten Tag im Spa." },
                row2: { title: "Das Herz der Tafel!", message: "Ein gemeinsamer Ausflug an einen Ort deiner Wahl." },
                row3: { title: "Vorletzter Triumph!", message: "Ein professionelles Fotoshooting nur für dich." },
                row4: { title: "Der krönende Abschluss!", message: "Ein Wochenende in einer Hütte in den Bergen." },
                // Vertikale Reihen
                col0: { title: "Vertikale Virtuosität!", message: "Ein Überraschungspaket mit Dingen, die du liebst." },
                col1: { title: "Zweite Säule der Kraft!", message: "Ein Abenteuer-Erlebnis, z.B. Bungee-Jumping oder Fallschirmspringen." },
                col2: { title: "Die zentrale Achse!", message: "Ein exklusives Dinner in einem Sternerestaurant." },
                col3: { title: "Pfad der Entschlossenheit!", message: "Ein maßgeschneiderter Anzug oder ein edles Kleidungsstück." },
                col4: { title: "Der Pfad des Triumphs!", message: "Ein Flug zu einer europäischen Hauptstadt deiner Wahl." },
                // Diagonale Reihen
                diag0: { title: "Diagonale Dominanz!", message: "Ein High-Tech-Gadget, das du dir schon immer gewünscht hast." },
                diag1: { title: "Querdenker-Bonus!", message: "Ein gemeinsamer Kreativ-Workshop (z.B. Malen, Töpfern)." }
            };

            const unlockedState = Array(cardsData.length).fill(false);
            const shownRewards = new Set();

            function saveState() {
                localStorage.setItem('racoonGameState', JSON.stringify({
                    unlocked: unlockedState,
                    rewards: Array.from(shownRewards)
                }));
            }

            function loadState() {
                const savedState = localStorage.getItem('racoonGameState');
                if (savedState) {
                    const parsedState = JSON.parse(savedState);
                    unlockedState.forEach((_, i) => unlockedState[i] = parsedState.unlocked[i]);
                    parsedState.rewards.forEach(rewardKey => shownRewards.add(rewardKey));
                }
            }


            function createCard(cardData, index) {
                const cardContainer = document.createElement('div');
                cardContainer.className = 'card-container';

                const card = document.createElement('div');
                card.className = 'card';

                // --- Karten-Vorderseite ---
                const frontFace = document.createElement('div');
                frontFace.className = 'card-face card-face--front';
                frontFace.textContent = cardData.title;

                // --- Karten-Rückseite ---
                const backFace = document.createElement('div');
                backFace.className = 'card-face card-face--back';
                
                const descriptionText = document.createElement('p');
                descriptionText.textContent = cardData.description;
                descriptionText.className = 'card-description';
                
                const unlockText = document.createElement('p');
                unlockText.textContent = 'Gib das Codewort ein:';
                
                const passwordInput = document.createElement('input');
                passwordInput.type = 'password';
                passwordInput.className = 'password-input';
                passwordInput.addEventListener('click', (e) => e.stopPropagation());
                passwordInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        if (passwordInput.value.toLowerCase() === cardData.password.toLowerCase()) {
                            unlockCard(card, backFace, passwordInput, cardData.title);
                            unlockedState[index] = true;
                            saveState(); // Zustand speichern
                            checkForWin();
                        } else {
                            passwordInput.style.borderColor = 'red';
                            setTimeout(() => {
                                passwordInput.style.borderColor = 'var(--border-color)';
                            }, 1000);
                        }
                    }
                });

                backFace.appendChild(descriptionText);
                backFace.appendChild(unlockText);
                backFace.appendChild(passwordInput);

                card.appendChild(frontFace);
                card.appendChild(backFace);
                cardContainer.appendChild(card);
                
                card.addEventListener('click', () => {
                    if (!card.classList.contains('unlocked')) {
                        card.classList.toggle('flipped');
                    }
                });

                return cardContainer;
            }

            function unlockCard(card, backFace, input, title) {
                card.classList.add('unlocked');
                if (!card.classList.contains('flipped')) {
                     card.classList.add('flipped');
                }
                backFace.innerHTML = '';
                const unlockedTitle = document.createElement('h3');
                unlockedTitle.className = "text-xl font-bold";
                unlockedTitle.textContent = title;
                
                const unlockedText = document.createElement('p');
                unlockedText.textContent = 'Freigeschaltet!';
                unlockedText.className = 'mt-2';
                
                backFace.appendChild(unlockedTitle);
                backFace.appendChild(unlockedText);
                backFace.classList.add('unlocked');
            }

            function checkForWin() {
                const winConditions = [
                    // Horizontale
                    { combo: [0, 1, 2, 3, 4], key: 'row0' },
                    { combo: [5, 6, 7, 8, 9], key: 'row1' },
                    { combo: [10, 11, 12, 13, 14], key: 'row2' },
                    { combo: [15, 16, 17, 18, 19], key: 'row3' },
                    { combo: [20, 21, 22, 23, 24], key: 'row4' },
                    // Vertikale
                    { combo: [0, 5, 10, 15, 20], key: 'col0' },
                    { combo: [1, 6, 11, 16, 21], key: 'col1' },
                    { combo: [2, 7, 12, 17, 22], key: 'col2' },
                    { combo: [3, 8, 13, 18, 23], key: 'col3' },
                    { combo: [4, 9, 14, 19, 24], key: 'col4' },
                    // Diagonale
                    { combo: [0, 6, 12, 18, 24], key: 'diag0' },
                    { combo: [4, 8, 12, 16, 20], key: 'diag1' }
                ];

                winConditions.forEach(condition => {
                    if (condition.combo.every(index => unlockedState[index]) && !shownRewards.has(condition.key)) {
                        const reward = rewards[condition.key];
                        showReward(reward.title, reward.message);
                        shownRewards.add(condition.key);
                        saveState(); // Zustand speichern
                    }
                });
            }

            function showReward(title, message) {
                const rewardModal = document.getElementById('reward-modal');
                document.getElementById('reward-title').textContent = title;
                document.getElementById('reward-message').textContent = message;
                rewardModal.classList.add('show');
            }

            document.getElementById('close-modal').addEventListener('click', () => {
                 const rewardModal = document.getElementById('reward-modal');
                 rewardModal.classList.remove('show');
            });

            // --- Initialisierung ---
            
            loadState(); // Gespeicherten Zustand laden

            // --- Hintergrundanimation erstellen ---
            const bgContainer = document.getElementById('background-container');
            const numElements = 50; // Mehr Federn
            for (let i = 0; i < numElements; i++) {
                const el = document.createElement('div');
                el.className = `floating-element feather`; // Nur noch Federn
                
                if (Math.random() > 0.8) {
                    el.classList.add('fast');
                }

                el.style.left = `${Math.random() * 100}vw`;
                el.style.top = `${Math.random() * 100}vh`;
                const size = Math.random() * 50 + 40; // Größere Federn
                el.style.width = `${size}px`;
                el.style.height = `${size}px`;
                el.style.animationDuration = `${Math.random() * 25 + 20}s`;
                el.style.animationDelay = `${Math.random() * 15}s`;
                el.style.transform = `rotate(${Math.random() * 360}deg)`;
                bgContainer.appendChild(el);
            }

            // Karten generieren und ins Grid einfügen
            const cardGrid = document.getElementById('card-grid');
            cardsData.forEach((data, index) => {
                const cardElement = createCard(data, index);
                cardGrid.appendChild(cardElement);
                if(unlockedState[index]) {
                    const card = cardElement.querySelector('.card');
                    const backFace = card.querySelector('.card-face--back');
                    unlockCard(card, backFace, null, data.title);
                }
            });
        });
    </script>
</body>
</html>

